<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.12/vue.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <title>JS Bin</title>
</head>

<body>
  <div id="app">
    <select name="" id="" class="form-control mb-3">
      <option value="">--- 請選擇城市 ---</option>
    </select>
    <div>
      <h4>關注城市</h4>
      <div class="card-columns">
        <!-- <div class="card status-aqi2">
          <div class="card-header">苗栗縣 - 三義
            <a href="#" class="float-right"><i class="fas fa-star"></i></a>
          </div>
          <div class="card-body">
            <ul class="list-unstyled">
              <li>AQI 指數: 54</li>
              <li>PM2.5: 8</li>
              <li>說明: 普通</li>
            </ul>
            2018-05-20 16:00
          </div>
        </div> -->
      </div>
    </div>
    <hr>
    <div class="card-columns">
      <card-city class="card" v-for="(item, index) in data" :key="item.SiteName" :cities="item"></card-city>
    </div>
  </div>

  <script type="text/x-template" id="cardCity">
    <div class="card status-aqi2">
      <div class="card-header">{{ cities['County'] }} - {{ cities['SiteName'] }}
        <a href="#" class="float-right"><i class="far fa-star"></i></a>
      </div>
      <div class="card-body">
        <ul class="list-unstyled">
          <li>AQI 指數: {{ cities['AQI'] }}</li>
          <li>PM2.5: {{ cities['PM2.5'] }}</li>
          <li>說明: {{ cities['Status'] }}</li>
        </ul>
        {{ cities['PublishTime'] }}
      </div>
    </div>
  </script>
  <style>
    .status-aqi2 {
      background-color: #ffff00;
    }

    .status-aqi3 {
      background-color: #ff7e00;
    }

    .status-aqi4 {
      background-color: #ff0000;
    }

    .status-aqi5 {
      background-color: #8f3f97;
    }

    .status-aqi6 {
      background-color: #7e0023;
    }
  </style>
  <script>
    Vue.component('card-city', {
      props: ['cities'],
      template: '#cardCity',
    });

    const app = new Vue({
      data: {
        data: [],
        location: [],
        stared: [],
        // selected: '',
        filter: '',
      },
      // 請在此撰寫 JavaScript
      methods: {
        getData() {
          const vm = this;
          const api = 'http://opendata2.epa.gov.tw/AQI.json';

          // 使用 jQuery ajax
          $.get(api).then(function (response) {
            vm.data = response;
            console.log(response);
          });
        },
      },
      created() {
        this.getData();
      }
    });
    app.$mount('#app');

  </script>


</body>

</html>
